# Wintun 性能测试

## 读性能

1. 开启Wintun虚拟网卡后设置IP，
2. 持续从虚拟网卡中读取数据并丢弃。
3. 启动UDP客户端向虚拟网卡所在网段发送数据。
4. 统计虚拟网卡每秒数据包读取数量，并计算传输速度。

READ SPEED

| 数据包大小 | 每秒读取数据包数量    | 每秒传输数据量  |
|:------|:-------------|:---------|
| 1420B | 232985 pkt/s | 310 MB/s |
| 512B  | 174902 pkt/s | 88 MB/s  |
| 128B  | 172194 pkt/s | 25 MB/s  |
| 32B   | 171812 pkt/s | 9 MB/s   |

结论：

- 在单个在小于1420B时数据包处理速度，约为 17W 个每秒，可以推断小数据包时传输速率固定。
- 收数据包处理速度影响，单个数据包大小将影响数据传输速率，数据包越大传输速度越大。

## 写性能

1. 开启Wintun虚拟网卡后设置IP，
2. 持续向虚拟网卡写入数据。
3. 统计虚拟网卡每秒数据包写入数量，并计算传输速度。

WRITE SPEED

| 数据包大小 | 每秒写入数据包数量     | 每秒传输数据量   |
|:------|:--------------|:----------|
| 1420B | 3494478 pkt/s | 662 MB/s  |
| 512B  | 3705535 pkt/s | 1837 MB/s |
| 128B  | 3826026 pkt/s | 496 MB/s  |
| 32B   | 3714086 pkt/s | 141 MB/s  |

结论：

- 数据包写入速度约为 300W左右，写入速度受数据包大小影响。
